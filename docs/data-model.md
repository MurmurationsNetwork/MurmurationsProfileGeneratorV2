# KV Store - MPG Data Model

## Users

### Key

The key is a SHA256 hash of the users email address:

`dude@dev.null => 5e64eab91e34c4d6eddc1f515f9ce81dea8238249f0946d40e3fc9ca22b7031a`

### Value

The value is a JSON object that contains the following properties:

- `last_login` (number) - last time the user logged in - Unix timestamp
- `password` (string) - hashed password - hashed using [brcryptjs](https://www.npmjs.com/package/bcryptjs)
- `profiles` (array of objects) - each object includes the `id` (unique key generated by `cuid`) of the JSON Schema profile instance created by and stored for the user - the object can store other useful data in the future (e.g., IPFS address of profile instance)

```
{
  "profiles": [
    {"id":"cjld2cjxh0000qzrmn831i7rn"},
    {"id":"cjld2cyuq0000t3rmniod1foy"}
  ],
  "last_login":1652814514172,
  "password":"$2a$10$YzTuuQJfthIxVja/WZGh5OxjhSeMqQnG2xtOSUMAP41oTBkpNrMRq"
}
```

## Profiles

### Key

The key is a unique ID generated by [cuid](https://www.npmjs.com/package/cuid).

### Value

The value is just the profile itself:

```
{"linked_schemas":["test_schema-v2.0.0"],"name":"The Dude","latitude":1,"longitude":1}
```
